<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 3D Model Viewer | Hamza Merziƒá </title> <meta name="author" content="Hamza Merziƒá"> <meta name="description" content="Visualize 3D models directly in your browser"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.png?7e18091fb100d644a1775d681e0c7943"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hamzamerzic.github.io/3d-viz/"> <script src="/assets/js/theme.js?e10672bfa35be5e687724adf57563e6e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Hamza</span> Merziƒá </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">3D Model Viewer</h1> <p class="post-description">Visualize 3D models directly in your browser</p> </header> <article> <p>Upload a 3D model file (<code>.dae</code>, <code>.obj</code>, <code>.stl</code>) to visualize it.</p> <form id="vizUploadForm"> <label for="fileUpload"><strong>Select 3D model (.dae, .obj, .stl):</strong></label><br> <input type="file" id="fileUpload" accept=".dae,.obj,.stl"><br><br> <button type="button" id="loadExample">üëÅÔ∏è Preview Example Model</button> </form> <p style="margin-top: 1em;"> Don‚Äôt have a file? <a href="/assets/3d/abb_irb52_7_120.dae" download="">Download an example</a>. </p> <script>
  const EXAMPLE_MODEL_URL = "/assets/3d/abb_irb52_7_120.dae";
</script> <div id="container" style="height: 60vh; position: relative;"> <div id="loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none;"> Loading model... <span id="progress">0%</span> </div> </div> <script src="/assets/js/three.min.js"></script> <script src="/assets/js/OrbitControls.js"></script> <script src="/assets/js/ColladaLoader.js"></script> <script src="/assets/js/OBJLoader.js"></script> <script src="/assets/js/STLLoader.js"></script> <script>
document.addEventListener("DOMContentLoaded", () => {
  if (!window.WebGLRenderingContext) {
    alert("Your browser does not support WebGL. Please upgrade.");
    return;
  }

  const container = document.getElementById("container");
  const loadingElem = document.getElementById("loading");
  loadingElem.style.display = "none";
  const progressElem = document.getElementById("progress");

  const scene = new THREE.Scene();
  let camera, renderer, controls, boundingBox, obj;

  // üîç Load from URL parameter if present
  const urlParams = new URLSearchParams(window.location.search);
  const fileUrl = urlParams.get("file");
  if (fileUrl) {
    const ext = fileUrl.split('.').pop().toLowerCase();
    loadingElem.style.display = "block";
    fetch(fileUrl)
      .then(res => {
        if (!res.ok) throw new Error("Fetch failed");
        return ext === 'stl' ? res.arrayBuffer() : res.text();
      })
      .then(data => loadModelFromText(data, ext))
      .catch(err => {
        console.error(err);
        loadingElem.textContent = "Error loading model from URL.";
      });
  }

  // File upload handler
  document.getElementById("fileUpload").addEventListener("change", event => {
    const file = event.target.files[0];
    if (!file) return;

    const extension = file.name.split('.').pop().toLowerCase();
    if (!['dae', 'obj', 'stl'].includes(extension)) {
      alert("Unsupported file type. Please upload a .dae, .obj, or .stl file.");
      return;
    }

    const reader = new FileReader();
    reader.onload = e => loadModelFromText(e.target.result, extension);
    if (extension === 'stl') {
      reader.readAsArrayBuffer(file);
    } else {
      reader.readAsText(file);
    }
  });

  // Example model button
  document.getElementById("loadExample").addEventListener("click", () => {
    loadingElem.style.display = "block";
    fetch(EXAMPLE_MODEL_URL)
      .then(res => {
        if (!res.ok) throw new Error("Failed to fetch example");
        return res.text();
      })
      .then(data => loadModelFromText(data, "dae"))
      .catch(err => {
        console.error(err);
        loadingElem.textContent = "Failed to load example model.";
      });
  });

  // Loader logic
  function loadModelFromText(fileContent, type) {
    loadingElem.style.display = "block";
    progressElem.textContent = "0%";

    try {
      if (obj) scene.remove(obj);

      const loaderMap = {
        dae: () => new THREE.ColladaLoader().parse(fileContent).scene,
        obj: () => new THREE.OBJLoader().parse(fileContent),
        stl: () => {
          const geometry = new THREE.STLLoader().parse(fileContent);
          const material = new THREE.MeshStandardMaterial({ color: 0x555555 });
          return new THREE.Mesh(geometry, material);
        }
      };

      const loaded = loaderMap[type]();
      loaded.traverse?.(child => {
        if (child instanceof THREE.Mesh) {
          child.material.flatShading = true;
          child.castShadow = true;
          child.receiveShadow = true;
        }
      });

      obj = new THREE.Object3D();
      obj.add(loaded);
      scene.add(obj);

      boundingBox = new THREE.Box3().setFromObject(obj);

      setupScene();
      animate();
      loadingElem.style.display = "none";
    } catch (err) {
      console.error("Load error:", err);
      loadingElem.textContent = "Error loading model.";
    }
  }

  function setupScene() {
    if (renderer) container.removeChild(renderer.domElement);

    const aspect = container.clientWidth / container.clientHeight;
    camera = new THREE.PerspectiveCamera(25, aspect, 0.1, 2000);

    const width = boundingBox.max.z - boundingBox.min.z;
    const height = boundingBox.max.y - boundingBox.min.y;

    camera.position.set(
      Math.max(width, height) / Math.tan(Math.PI * camera.fov / 360),
      (boundingBox.min.y + boundingBox.max.y) / 2,
      (boundingBox.min.z + boundingBox.max.z) / 2
    );

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setClearColor(0xffffff);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    container.appendChild(renderer.domElement);

    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.target.set(
      (boundingBox.min.x + boundingBox.max.x) / 2,
      (boundingBox.min.y + boundingBox.max.y) / 2,
      (boundingBox.min.z + boundingBox.max.z) / 2
    );
    controls.addEventListener("change", render);
    controls.update();

    scene.clear();
    scene.add(obj);

    scene.add(new THREE.AmbientLight(0xffffff, 0.3));
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
    directionalLight.position.set(2, 2, 2);
    directionalLight.castShadow = true;
    directionalLight.shadow.mapSize.width = 1024;
    directionalLight.shadow.mapSize.height = 1024;
    scene.add(directionalLight);

    const size = Math.max(
      boundingBox.max.x - boundingBox.min.x,
      boundingBox.max.z - boundingBox.min.z
    ) * 2;
    scene.add(new THREE.GridHelper(size, 10));

    window.addEventListener("resize", onWindowResize);
    applyThemeBackground();
    watchThemeChange();
  }

  function onWindowResize() {
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
    render();
  }

  function applyThemeBackground() {
    const bgColor = getComputedStyle(document.documentElement).getPropertyValue("--global-bg-color").trim();
    if (bgColor) renderer.setClearColor(new THREE.Color(bgColor));
  }

  function watchThemeChange() {
    const observer = new MutationObserver(() => applyThemeBackground());
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ["data-theme"] });
    applyThemeBackground();
  }

  function render() {
    if (renderer && camera) renderer.render(scene, camera);
  }

  function animate() {
    requestAnimationFrame(animate);
    render();
  }
});
</script> <style>#vizUploadForm{padding:1em;border:1px solid;border-radius:8px;max-width:500px;margin-bottom:1em}#vizUploadForm input[type="file"],#vizUploadForm button{font-size:1em;padding:.5em;margin-top:.3em;width:100%;box-sizing:border-box}#vizUploadForm button{background-color:#12b075;border:0;border-radius:5px;color:white;cursor:pointer;margin-top:1em}#vizUploadForm button:hover{background-color:#0e8d5d}</style> </article> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>