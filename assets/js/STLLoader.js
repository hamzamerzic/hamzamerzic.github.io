!function(){class t extends THREE.Loader{constructor(t){super(t)}load(t,e,r,n){const o=this,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(r){try{e(o.parse(r))}catch(e){n?n(e):console.error(e),o.manager.itemError(t)}}),r,n)}parse(t){function e(t){const e=new DataView(t),n=50;if(84+e.getUint32(80,!0)*n===e.byteLength)return!0;const o=[115,111,108,105,100];for(let t=0;t<5;t++)if(r(o,e,t))return!1;return!0}function r(t,e,r){for(let n=0,o=t.length;n<o;n++)if(t[n]!==e.getUint8(r+n))return!1;return!0}function n(t){const e=new DataView(t),r=e.getUint32(80,!0);let n,o,a,s,i,l,u,f,c=!1;for(let t=0;t<70;t++)1129270351==e.getUint32(t,!1)&&82==e.getUint8(t+4)&&61==e.getUint8(t+5)&&(c=!0,s=new Float32Array(3*r*3),i=e.getUint8(t+6)/255,l=e.getUint8(t+7)/255,u=e.getUint8(t+8)/255,f=e.getUint8(t+9)/255);const g=84,E=50,h=new THREE.BufferGeometry,d=new Float32Array(3*r*3),w=new Float32Array(3*r*3);for(let t=0;t<r;t++){const r=g+t*E,f=e.getFloat32(r,!0),h=e.getFloat32(r+4,!0),p=e.getFloat32(r+8,!0);if(c){const t=e.getUint16(r+48,!0);32768&t?(n=i,o=l,a=u):(n=(31&t)/31,o=(t>>5&31)/31,a=(t>>10&31)/31)}for(let i=1;i<=3;i++){const l=r+12*i,u=3*t*3+3*(i-1);d[u]=e.getFloat32(l,!0),d[u+1]=e.getFloat32(l+4,!0),d[u+2]=e.getFloat32(l+8,!0),w[u]=f,w[u+1]=h,w[u+2]=p,c&&(s[u]=n,s[u+1]=o,s[u+2]=a)}}return h.setAttribute("position",new THREE.BufferAttribute(d,3)),h.setAttribute("normal",new THREE.BufferAttribute(w,3)),c&&(h.setAttribute("color",new THREE.BufferAttribute(s,3)),h.hasColors=!0,h.alpha=f),h}function o(t){const e=new THREE.BufferGeometry,r=/solid([\s\S]*?)endsolid/g,n=/facet([\s\S]*?)endfacet/g;let o=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,s=new RegExp("vertex"+a+a+a,"g"),i=new RegExp("normal"+a+a+a,"g"),l=[],u=[],f=new THREE.Vector3;let c,g=0,E=0,h=0;for(;null!==(c=r.exec(t));){E=h;const t=c[0];for(;null!==(c=n.exec(t));){let t=0,e=0;const r=c[0];for(;null!==(c=i.exec(r));)f.x=parseFloat(c[1]),f.y=parseFloat(c[2]),f.z=parseFloat(c[3]),e++;for(;null!==(c=s.exec(r));)l.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),u.push(f.x,f.y,f.z),t++,h++;1!==e&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==t&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}const r=E,a=h-E;e.addGroup(r,a,g),g++}return e.setAttribute("position",new THREE.Float32BufferAttribute(l,3)),e.setAttribute("normal",new THREE.Float32BufferAttribute(u,3)),e}function a(t){return"string"!=typeof t?THREE.LoaderUtils.decodeText(new Uint8Array(t)):t}function s(t){if("string"==typeof t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=255&t.charCodeAt(r);return e.buffer||e}return t}const i=s(t);return e(i)?n(i):o(a(t))}}THREE.STLLoader=t}();