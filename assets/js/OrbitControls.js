THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*z.autoRotateSpeed}function o(){return Math.pow(.95,z.zoomSpeed)}function a(e){q.theta-=e}function i(e){q.phi-=e}function c(e){z.object.isPerspectiveCamera?K/=e:z.object.isOrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom*e)),z.object.updateProjectionMatrix(),G=!0):z.enableZoom=!1}function r(e){z.object.isPerspectiveCamera?K*=e:z.object.isOrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom/e)),z.object.updateProjectionMatrix(),G=!0):z.enableZoom=!1}function s(e){W.set(e.clientX,e.clientY)}function u(e){oe.set(e.clientX,e.clientY)}function m(e){ee.set(e.clientX,e.clientY)}function h(e){J.set(e.clientX,e.clientY),$.subVectors(J,W);var t=z.domElement===document?z.domElement.body:z.domElement;a(2*Math.PI*$.x/t.clientWidth*z.rotateSpeed),i(2*Math.PI*$.y/t.clientHeight*z.rotateSpeed),W.copy(J),z.update()}function d(e){ae.set(e.clientX,e.clientY),ie.subVectors(ae,oe),ie.y>0?c(o()):ie.y<0&&r(o()),oe.copy(ae),z.update()}function p(e){te.set(e.clientX,e.clientY),ne.subVectors(te,ee),se(ne.x,ne.y),ee.copy(te),z.update()}function l(){}function E(e){e.deltaY<0?r(o()):e.deltaY>0&&c(o()),z.update()}function b(e){switch(e.keyCode){case z.keys.UP:se(0,z.keyPanSpeed),z.update();break;case z.keys.BOTTOM:se(0,-z.keyPanSpeed),z.update();break;case z.keys.LEFT:se(z.keyPanSpeed,0),z.update();break;case z.keys.RIGHT:se(-z.keyPanSpeed,0),z.update()}}function f(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function g(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);oe.set(0,o)}function v(e){ee.set(e.touches[0].pageX,e.touches[0].pageY)}function T(e){J.set(e.touches[0].pageX,e.touches[0].pageY),$.subVectors(J,W);var t=z.domElement===document?z.domElement.body:z.domElement;a(2*Math.PI*$.x/t.clientWidth*z.rotateSpeed),i(2*Math.PI*$.y/t.clientHeight*z.rotateSpeed),W.copy(J),z.update()}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);ae.set(0,a),ie.subVectors(ae,oe),ie.y>0?r(o()):ie.y<0&&c(o()),oe.copy(ae),z.update()}function O(e){te.set(e.touches[0].pageX,e.touches[0].pageY),ne.subVectors(te,ee),se(ne.x,ne.y),ee.copy(te),z.update()}function R(){}function H(e){if(!1!==z.enabled){switch(e.preventDefault(),e.button){case z.mouseButtons.ORBIT:if(!1===z.enableRotate)return;s(e),I=X.ROTATE;break;case z.mouseButtons.ZOOM:if(!1===z.enableZoom)return;u(e),I=X.DOLLY;break;case z.mouseButtons.PAN:if(!1===z.enablePan)return;m(e),I=X.PAN}I!==X.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",j,!1),z.dispatchEvent(U))}}function P(e){if(!1!==z.enabled)switch(e.preventDefault(),I){case X.ROTATE:if(!1===z.enableRotate)return;h(e);break;case X.DOLLY:if(!1===z.enableZoom)return;d(e);break;case X.PAN:if(!1===z.enablePan)return;p(e)}}function j(e){!1!==z.enabled&&(l(e),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",j,!1),z.dispatchEvent(F),I=X.NONE)}function w(e){!1===z.enabled||!1===z.enableZoom||I!==X.NONE&&I!==X.ROTATE||(e.preventDefault(),e.stopPropagation(),z.dispatchEvent(U),E(e),z.dispatchEvent(F))}function L(e){!1!==z.enabled&&!1!==z.enableKeys&&!1!==z.enablePan&&b(e)}function M(e){if(!1!==z.enabled){switch(e.touches.length){case 1:if(!1===z.enableRotate)return;f(e),I=X.TOUCH_ROTATE;break;case 2:if(!1===z.enableZoom)return;g(e),I=X.TOUCH_DOLLY;break;case 3:if(!1===z.enablePan)return;v(e),I=X.TOUCH_PAN;break;default:I=X.NONE}I!==X.NONE&&z.dispatchEvent(U)}}function A(e){if(!1!==z.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===z.enableRotate)return;if(I!==X.TOUCH_ROTATE)return;T(e);break;case 2:if(!1===z.enableZoom)return;if(I!==X.TOUCH_DOLLY)return;y(e);break;case 3:if(!1===z.enablePan)return;if(I!==X.TOUCH_PAN)return;O(e);break;default:I=X.NONE}}function N(e){!1!==z.enabled&&(R(e),z.dispatchEvent(F),I=X.NONE)}function x(e){!1!==z.enabled&&e.preventDefault()}var k,S,V,C,D;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return B.phi},this.getAzimuthalAngle=function(){return B.theta},this.saveState=function(){z.target0.copy(z.target),z.position0.copy(z.object.position),z.zoom0=z.object.zoom},this.reset=function(){z.target.copy(z.target0),z.object.position.copy(z.position0),z.object.zoom=z.zoom0,z.object.updateProjectionMatrix(),z.dispatchEvent(Z),z.update(),I=X.NONE},this.update=(k=new THREE.Vector3,S=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),V=S.clone().inverse(),C=new THREE.Vector3,D=new THREE.Quaternion,function(){var e=z.object.position;return k.copy(e).sub(z.target),k.applyQuaternion(S),B.setFromVector3(k),z.autoRotate&&I===X.NONE&&a(n()),B.theta+=q.theta,B.phi+=q.phi,B.theta=Math.max(z.minAzimuthAngle,Math.min(z.maxAzimuthAngle,B.theta)),B.phi=Math.max(z.minPolarAngle,Math.min(z.maxPolarAngle,B.phi)),B.makeSafe(),B.radius*=K,B.radius=Math.max(z.minDistance,Math.min(z.maxDistance,B.radius)),z.target.add(Q),k.setFromSpherical(B),k.applyQuaternion(V),e.copy(z.target).add(k),z.object.lookAt(z.target),!0===z.enableDamping?(q.theta*=1-z.dampingFactor,q.phi*=1-z.dampingFactor):q.set(0,0,0),K=1,Q.set(0,0,0),!!(G||C.distanceToSquared(z.object.position)>_||8*(1-D.dot(z.object.quaternion))>_)&&(z.dispatchEvent(Z),C.copy(z.object.position),D.copy(z.object.quaternion),G=!1,!0)}),this.dispose=function(){z.domElement.removeEventListener("contextmenu",x,!1),z.domElement.removeEventListener("mousedown",H,!1),z.domElement.removeEventListener("wheel",w,!1),z.domElement.removeEventListener("touchstart",M,!1),z.domElement.removeEventListener("touchend",N,!1),z.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",j,!1),window.removeEventListener("keydown",L,!1)};var Y,z=this,Z={type:"change"},U={type:"start"},F={type:"end"},X={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},I=X.NONE,_=1e-6,B=new THREE.Spherical,q=new THREE.Spherical,K=1,Q=new THREE.Vector3,G=!1,W=new THREE.Vector2,J=new THREE.Vector2,$=new THREE.Vector2,ee=new THREE.Vector2,te=new THREE.Vector2,ne=new THREE.Vector2,oe=new THREE.Vector2,ae=new THREE.Vector2,ie=new THREE.Vector2,ce=(Y=new THREE.Vector3,function(e,t){Y.setFromMatrixColumn(t,0),Y.multiplyScalar(-e),Q.add(Y)}),re=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),Q.add(e)}}(),se=function(){var e=new THREE.Vector3;return function(t,n){var o=z.domElement===document?z.domElement.body:z.domElement;if(z.object.isPerspectiveCamera){var a=z.object.position;e.copy(a).sub(z.target);var i=e.length();i*=Math.tan(z.object.fov/2*Math.PI/180),ce(2*t*i/o.clientHeight,z.object.matrix),re(2*n*i/o.clientHeight,z.object.matrix)}else z.object.isOrthographicCamera?(ce(t*(z.object.right-z.object.left)/z.object.zoom/o.clientWidth,z.object.matrix),re(n*(z.object.top-z.object.bottom)/z.object.zoom/o.clientHeight,z.object.matrix)):z.enablePan=!1}}();z.domElement.addEventListener("contextmenu",x,!1),z.domElement.addEventListener("mousedown",H,!1),z.domElement.addEventListener("wheel",w,!1),z.domElement.addEventListener("touchstart",M,!1),z.domElement.addEventListener("touchend",N,!1),z.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",L,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return this.target}},noZoom:{get:function(){return!this.enableZoom},set:function(e){this.enableZoom=!e}},noRotate:{get:function(){return!this.enableRotate},set:function(e){this.enableRotate=!e}},noPan:{get:function(){return!this.enablePan},set:function(e){this.enablePan=!e}},noKeys:{get:function(){return!this.enableKeys},set:function(e){this.enableKeys=!e}},staticMoving:{get:function(){return!this.enableDamping},set:function(e){this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return this.dampingFactor},set:function(e){this.dampingFactor=e}}});